<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <title>Title</title>
</head>
<body>
<input type="file" id="imageFile" onchange="onImageChanged(event)">
<canvas id="canvasProfile" width="500px" height="500px">
</canvas>
<div onclick="setClear();" id="clear">clear</div>
<div onclick="setLomo();" id="lomo">lomo</div>
<div onclick="setClarity();" id="clarity">clarity</div>
<div onclick="setSinCity();" id="sinCity">sinCity</div>
<div onclick="setSunrise();" id="sunrise">sunrise</div>
<div onclick="setCrossProcess();" id="crossProcess">crossProcess</div>
<div onclick="setOrangePeel();" id="orangePeel">orangePeel</div>
<div onclick="setLove();" id="love">love</div>
<div onclick="setGrungy();" id="grungy">grungy</div>
<div onclick="setJarques();" id="jarques">jarques</div>
<div onclick="setPinhole();" id="pinhole">pinhole</div>
<div onclick="setOldBoot();" id="oldBoot">oldBoot</div>
<div onclick="setGlowingSun();" id="glowingSun">glowingSun</div>
<div onclick="setHazyDays();" id="hazyDays">hazyDays</div>
<div onclick="setHerMajesty();" id="herMajesty">herMajesty</div>
<div onclick="setNostalgia();" id="nostalgia">nostalgia</div>
<div onclick="setHemingway();" id="hemingway">hemingway</div>
<div onclick="setConcentrate();" id="concentrate">concentrate</div>
</body>
<script type="text/javascript" src="/javascripts/caman.full.min.js"></script>
<script type="text/javascript" src="/javascripts/caman.min.js"></script>
<script>
    function setClear(){
        Caman("#canvasProfile",path,function(){
            this.revert();
            this.render();
        });
    }
    function setLomo(){
        Caman("#canvasProfile",path, function () {
            this.lomo();
            this.render();
        });
    }
    function setClarity(){
        Caman("#canvasProfile",path, function () {
            this.clarity();
            this.render();
        });
    }
    function setSinCity(){
        Caman("#canvasProfile",path, function () {
            this.sinCity();
            this.render();
        });
    }
    function setSunrise(){
        Caman("#canvasProfile",path, function () {
            this.sunrise();
            this.render();
        });
    }
    function setCrossProcess(){
        Caman("#canvasProfile",path, function () {
            this.crossProcess();
            this.render();
        });
    }
    function setOrangePeel(){
        Caman("#canvasProfile",path, function () {
            this.orangePeel();
            this.render();
        });
    }
    function setLove(){
        Caman("#canvasProfile",path, function () {
            this.love();
            this.render();
        });
    }
    function setGrungy(){
        Caman("#canvasProfile",path, function () {
            this.grungy();
            this.render();
        });
    }
    function setJarques(){
        Caman("#canvasProfile",path, function () {
            this.jarques();
            this.render();
        });
    }
    function setPinhole(){
        Caman("#canvasProfile",path, function () {
            this.pinhole();
            this.render();
        });
    }
    function setOldBoot(){
        Caman("#canvasProfile",path, function () {
            this.oldBoot();
            this.render();
        });
    }
    function setGlowingSun(){
        Caman("#canvasProfile",path, function () {
            this.glowingSun();
            this.render();
        });
    }
    function setHazyDays(){
        Caman("#canvasProfile",path, function () {
            this.hazyDays();
            this.render();
        });
    }
    function setHerMajesty(){
        Caman("#canvasProfile",path, function () {
            this.herMajesty();
            this.render();
        });
    }
    function setNostalgia(){
        Caman("#canvasProfile",path, function () {
            this.nostalgia();
            this.render();
        });
    }
    function setHemingway(){
        Caman("#canvasProfile",path, function () {
            this.hemingway();
            this.render();
        });
    }
    function setConcentrate(){
        Caman("#canvasProfile",path, function () {
            this.concentrate();
            this.render();
        });
    }
    var theCanvas=document.getElementById("canvasProfile");
    var Context=theCanvas.getContext("2d");
    Caman.Filter.register("posterize", function (adjust) {
        var numOfAreas = 256 / adjust;
        var numOfValues = 255 / (adjust - 1);
        this.process("posterize", function (rgba) {
            rgba.r = Math.floor(Math.floor(rgba.r / numOfAreas) * numOfValues);
            rgba.g = Math.floor(Math.floor(rgba.g / numOfAreas) * numOfValues);
            rgba.b = Math.floor(Math.floor(rgba.b / numOfAreas) * numOfValues);
            return rgba;
        });
    });
    Caman.Filter.register("vintage", function() {
        this.greyscale();
        this.contrast(5);
        this.noise(3);
        this.sepia(100);
        this.channels({red: 8, blue: 2, green: 4});
        this.gamma(0.87);
    });
    Caman.Filter.register("lomo", function() {
        this.brightness(15);
        this.exposure(15);
        this.curves('rgb', [0, 0], [200, 0], [155, 255], [255, 255]);
        this.saturation(-20);
        this.gamma(1.8);
        this.brightness(5);
    });
    Caman.Filter.register("clarity", function() {
        this.vibrance(20);
        this.curves('rgb', [5, 0], [130, 150], [190, 220], [250, 255]);
        this.greyscale();
        this.contrast(4);
    });
    Caman.Filter.register("sinCity",function(){
        this.contrast(100);
        this.brightness(15);
        this.exposure(10);
        this.posterize(80);
        this.clip(30);
        this.greyscale();
    });
    Caman.Filter.register("sunrise", function() {
        this.exposure(3.5);
        this.saturation(-5);
        this.vibrance(50);
        this.sepia(60);
        this.colorize("#e87b22", 10);
        this.channels({red: 8, blue: 8});
        this.contrast(5);
        this.gamma(1.2);
    });
    Caman.Filter.register("crossProcess", function() {
        this.exposure(5);
        this.colorize("#e87b22", 4);
        this.sepia(20);
        this.channels({blue: 8, red: 3});
        this.curves('b', [0, 0], [100, 150], [180, 180], [255, 255]);
        this.contrast(15);
        this.vibrance(75);
        this.gamma(1.6);
    });
    Caman.Filter.register("orangePeel", function() {
        this.curves('rgb', [0, 0], [100, 50], [140, 200], [255, 255]);
        this.vibrance(-30);
        this.saturation(-30);
        this.colorize('#ff9000', 30);
        this.contrast(-5);
        this.gamma(1.4);
    });
    Caman.Filter.register("love", function() {
        this.brightness(5);
        this.exposure(8);
        this.contrast(4);
        this.colorize('#c42007', 30);
        this.vibrance(50);
        this.gamma(1.3);
    });
    Caman.Filter.register("grungy", function() {
        this.gamma(1.5);
        this.clip(25);
        this.saturation(-60);
        this.contrast(5);
        this.noise(5);
    });
    Caman.Filter.register("jarques", function() {
        this.saturation(-35);
        this.curves('b', [20, 0], [90, 120], [186, 144], [255, 230]);
        this.curves('r', [0, 0], [144, 90], [138, 120], [255, 255]);
        this.curves('g', [10, 0], [115, 105], [148, 100], [255, 248]);
        this.curves('rgb', [0, 0], [120, 100], [128, 140], [255, 255]);
    });
    Caman.Filter.register("pinhole", function() {
        this.greyscale();
        this.sepia(10);
        this.exposure(10);
        this.contrast(15);
    });
    Caman.Filter.register("oldBoot", function() {
        this.saturation(-20);
        this.vibrance(-50);
        this.gamma(1.1);
        this.sepia(30);
        this.channels({red: -10, blue: 5});
        this.curves('rgb', [0, 0], [80, 50], [128, 230], [255, 255]);
    });
    Caman.Filter.register("glowingSun", function() {
        this.brightness(10);
        this.newLayer(function () {
            this.setBlendingMode("multiply");
            this.opacity(80);
            this.copyParent();
            this.filter.gamma(0.8);
            this.filter.contrast(50);
            this.filter.exposure(10);
        });
        this.newLayer(function () {
            this.setBlendingMode("softLight");
            this.opacity(80);
            this.fillColor("#f49600");
        });
        this.exposure(20);
        this.gamma(0.8);
    });
    Caman.Filter.register("hazyDays",function() {
        this.gamma(1.2);
        this.newLayer(function () {
            this.setBlendingMode("overlay");
            this.opacity(60);
            this.copyParent();
            this.filter.channels({red: 5});
            this.filter.stackBlur(15);
        });
        this.newLayer(function () {
            this.setBlendingMode("addition");
            this.opacity(40);
            this.fillColor("#6899ba");
        });
        this.newLayer(function () {
            this.setBlendingMode("multiply");
            this.opacity(35);
            this.copyParent();
            this.filter.brightness(40);
            this.filter.vibrance(40);
            this.filter.exposure(30);
            this.filter.contrast(15);
            this.filter.curves('r', [0, 40], [128, 128], [128, 128], [255, 215]);
            this.filter.curves('g', [0, 40], [128, 128], [128, 128], [255, 215]);
            this.filter.curves('b', [0, 40], [128, 128], [128, 128], [255, 215]);
            this.filter.stackBlur(5);
        });
        this.curves('r', [20, 0], [128, 158], [128, 128], [235, 255]);
        this.curves('g', [20, 0], [128, 128], [128, 128], [235, 255]);
        this.curves('b', [20, 0], [128, 108], [128, 128], [235, 255]);
    });
    Caman.Filter.register("herMajesty",function() {
        this.brightness(40);
        this.colorize("#ea1c5d", 10);
        this.curves('b', [0, 10], [128, 180], [190, 190], [255, 255]);
        this.newLayer(function () {
            this.setBlendingMode('overlay');
            this.opacity(50);
            this.copyParent();
            this.filter.gamma(0.7);
            this.newLayer(function () {
                this.setBlendingMode('normal');
                this.opacity(60);
                this.fillColor('#ea1c5d');
            });
        });

        this.newLayer(function () {
            this.setBlendingMode('multiply');
            this.opacity(60);
            this.copyParent();
            this.filter.saturation(50);
            this.filter.hue(90);
            this.filter.contrast(10);
        });
        this.gamma(1.4);
        this.vibrance(-30);
        this.newLayer(function () {
            this.opacity(10);
            this.fillColor('#e5f0ff');
        });
    });
    Caman.Filter.register("nostalgia",function() {
        this.saturation(20);
        this.gamma(1.4);
        this.greyscale();
        this.contrast(5);
        this.sepia(100);
        this.channels({red: 8, blue: 2, green: 4});
        this.gamma(0.8);
        this.contrast(5);
        this.exposure(10);
        this.newLayer(function () {
            this.setBlendingMode('overlay');
            this.copyParent();
            this.opacity(55);
            this.filter.stackBlur(10);
        });
    });
    Caman.Filter.register("hemingway",function() {
        this.greyscale()
        this.contrast(10);
        this.gamma(0.9);
        this.newLayer(function () {
            this.setBlendingMode("multiply");
            this.opacity(40);
            this.copyParent();
            this.filter.exposure(15);
            this.filter.contrast(15);
            this.filter.channels({green: 10, red: 5});
        });
        this.sepia(30);
        this.curves('rgb', [0, 10], [120, 90], [180, 200], [235, 255]);
        this.channels({red: 5, green: -2});
        this.exposure(15);
    });
    Caman.Filter.register("concentrate",function() {
        this.saturation(-50);
        this.channels({red: 3});
        this.newLayer(function () {
            this.setBlendingMode("multiply");
            this.opacity(80);
            this.copyParent()
            this.filter.contrast(50);
            this.filter.exposure(10);
            this.filter.channels({blue: 5});
        });
        this.brightness(10);
    });
    var image = new Image();
    var path;
    function onImageChanged(event) {
        path = URL.createObjectURL(event.target.files[0]);
        image.src=path;
        Context.drawImage(image,0,0);
    }
    (function() {
        var BlurStack, mul_table, shg_table;
        mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];
        shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];
        BlurStack = function() {
            this.r = 0;
            this.g = 0;
            this.b = 0;
            this.a = 0;
            return this.next = null;
        };
        Caman.Plugin.register("stackBlur", function(radius) {
            var b_in_sum, b_out_sum, b_sum, div, g_in_sum, g_out_sum, g_sum, height, heightMinus1, i, j, k, l, m, mul_sum, n, o, p, pb, pg, pixels, pr, q, r, r_in_sum, r_out_sum, r_sum, radiusPlus1, rbs, ref, ref1, ref2, ref3, ref4, ref5, ref6, ref7, ref8, s, shg_sum, stack, stackEnd, stackIn, stackOut, stackStart, sumFactor, w4, width, widthMinus1, x, y, yi, yp, yw;
            if (isNaN(radius) || radius < 1) {
                return;
            }
            radius |= 0;
            pixels = this.pixelData;
            width = this.dimensions.width;
            height = this.dimensions.height;
            div = radius + radius + 1;
            w4 = width << 2;
            widthMinus1 = width - 1;
            heightMinus1 = height - 1;
            radiusPlus1 = radius + 1;
            sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;
            stackStart = new BlurStack();
            stack = stackStart;
            for (i = j = 1, ref = div; 1 <= ref ? j < ref : j > ref; i = 1 <= ref ? ++j : --j) {
                stack = stack.next = new BlurStack();
                if (i === radiusPlus1) {
                    stackEnd = stack;
                }
            }
            stack.next = stackStart;
            stackIn = null;
            stackOut = null;
            yw = yi = 0;
            mul_sum = mul_table[radius];
            shg_sum = shg_table[radius];
            for (y = k = 0, ref1 = height; 0 <= ref1 ? k < ref1 : k > ref1; y = 0 <= ref1 ? ++k : --k) {
                r_in_sum = g_in_sum = b_in_sum = r_sum = g_sum = b_sum = 0;
                r_out_sum = radiusPlus1 * (pr = pixels[yi]);
                g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
                b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
                r_sum += sumFactor * pr;
                g_sum += sumFactor * pg;
                b_sum += sumFactor * pb;
                stack = stackStart;
                for (i = l = 0, ref2 = radiusPlus1; 0 <= ref2 ? l < ref2 : l > ref2; i = 0 <= ref2 ? ++l : --l) {
                    stack.r = pr;
                    stack.g = pg;
                    stack.b = pb;
                    stack = stack.next;
                }
                for (i = m = 1, ref3 = radiusPlus1; 1 <= ref3 ? m < ref3 : m > ref3; i = 1 <= ref3 ? ++m : --m) {
                    p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);
                    r_sum += (stack.r = (pr = pixels[p])) * (rbs = radiusPlus1 - i);
                    g_sum += (stack.g = (pg = pixels[p + 1])) * rbs;
                    b_sum += (stack.b = (pb = pixels[p + 2])) * rbs;
                    r_in_sum += pr;
                    g_in_sum += pg;
                    b_in_sum += pb;
                    stack = stack.next;
                }
                stackIn = stackStart;
                stackOut = stackEnd;
                for (x = n = 0, ref4 = width; 0 <= ref4 ? n < ref4 : n > ref4; x = 0 <= ref4 ? ++n : --n) {
                    pixels[yi] = (r_sum * mul_sum) >> shg_sum;
                    pixels[yi + 1] = (g_sum * mul_sum) >> shg_sum;
                    pixels[yi + 2] = (b_sum * mul_sum) >> shg_sum;
                    r_sum -= r_out_sum;
                    g_sum -= g_out_sum;
                    b_sum -= b_out_sum;
                    r_out_sum -= stackIn.r;
                    g_out_sum -= stackIn.g;
                    b_out_sum -= stackIn.b;
                    p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;
                    r_in_sum += (stackIn.r = pixels[p]);
                    g_in_sum += (stackIn.g = pixels[p + 1]);
                    b_in_sum += (stackIn.b = pixels[p + 2]);
                    r_sum += r_in_sum;
                    g_sum += g_in_sum;
                    b_sum += b_in_sum;
                    stackIn = stackIn.next;
                    r_out_sum += (pr = stackOut.r);
                    g_out_sum += (pg = stackOut.g);
                    b_out_sum += (pb = stackOut.b);
                    r_in_sum -= pr;
                    g_in_sum -= pg;
                    b_in_sum -= pb;
                    stackOut = stackOut.next;
                    yi += 4;
                }
                yw += width;
            }
            for (x = o = 0, ref5 = width; 0 <= ref5 ? o < ref5 : o > ref5; x = 0 <= ref5 ? ++o : --o) {
                g_in_sum = b_in_sum = r_in_sum = g_sum = b_sum = r_sum = 0;
                yi = x << 2;
                r_out_sum = radiusPlus1 * (pr = pixels[yi]);
                g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);
                b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);
                r_sum += sumFactor * pr;
                g_sum += sumFactor * pg;
                b_sum += sumFactor * pb;
                stack = stackStart;
                for (i = q = 0, ref6 = radiusPlus1; 0 <= ref6 ? q < ref6 : q > ref6; i = 0 <= ref6 ? ++q : --q) {
                    stack.r = pr;
                    stack.g = pg;
                    stack.b = pb;
                    stack = stack.next;
                }
                yp = width;
                for (i = r = 1, ref7 = radius; 1 <= ref7 ? r <= ref7 : r >= ref7; i = 1 <= ref7 ? ++r : --r) {
                    yi = (yp + x) << 2;
                    r_sum += (stack.r = (pr = pixels[yi])) * (rbs = radiusPlus1 - i);
                    g_sum += (stack.g = (pg = pixels[yi + 1])) * rbs;
                    b_sum += (stack.b = (pb = pixels[yi + 2])) * rbs;
                    r_in_sum += pr;
                    g_in_sum += pg;
                    b_in_sum += pb;
                    stack = stack.next;
                    if (i < heightMinus1) {
                        yp += width;
                    }
                }
                yi = x;
                stackIn = stackStart;
                stackOut = stackEnd;
                for (y = s = 0, ref8 = height; 0 <= ref8 ? s < ref8 : s > ref8; y = 0 <= ref8 ? ++s : --s) {
                    p = yi << 2;
                    pixels[p] = (r_sum * mul_sum) >> shg_sum;
                    pixels[p + 1] = (g_sum * mul_sum) >> shg_sum;
                    pixels[p + 2] = (b_sum * mul_sum) >> shg_sum;
                    r_sum -= r_out_sum;
                    g_sum -= g_out_sum;
                    b_sum -= b_out_sum;
                    r_out_sum -= stackIn.r;
                    g_out_sum -= stackIn.g;
                    b_out_sum -= stackIn.b;
                    p = (x + (((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width)) << 2;
                    r_sum += (r_in_sum += (stackIn.r = pixels[p]));
                    g_sum += (g_in_sum += (stackIn.g = pixels[p + 1]));
                    b_sum += (b_in_sum += (stackIn.b = pixels[p + 2]));
                    stackIn = stackIn.next;
                    r_out_sum += (pr = stackOut.r);
                    g_out_sum += (pg = stackOut.g);
                    b_out_sum += (pb = stackOut.b);
                    r_in_sum -= pr;
                    g_in_sum -= pg;
                    b_in_sum -= pb;
                    stackOut = stackOut.next;
                    yi += width;
                }
            }
            return this;
        });
        return Caman.Filter.register("stackBlur", function(radius) {
            return this.processPlugin("stackBlur", [radius]);
        });
    })();
</script>
</html>